#!/usr/local/bin/bash

shopt -s expand_aliases

declare -A web_hosts
web_hosts[prod]=cmsprod01
web_hosts[bu]=cmsbu01
web_hosts[staging]=staging
web_hosts[sandbox]=sandbox

declare -A web_commands
web_commands[top]="top"
web_commands[httpd-reload]="sudo /etc/init.d/httpd reload"
web_commands[httpd-restart]="sudo /etc/init.d/httpd restart"

declare -A db_hosts
db_hosts[prod]=cmsdb01
db_hosts[bu]=cmsbu01
db_hosts[staging]=staging-db
db_hosts[sandbox]=sandbox-db
db_hosts[build]=build

declare -A db_commands
db_commands[db]="mysql -u drupal -p drupal"
db_commands[db-root]="mysql -u root -p"
db_commands[db-slave-status]="mysql -u root -p -eSHOW\ SLAVE\ STATUS\\G"

save_alias() {
  echo "alias $1-$3=\"ssh -t $2 $4\""
}

for hostname in "${!web_hosts[@]}"; do
  for command_name in "${!web_commands[@]}"; do
    save_alias ${hostname} ${web_hosts[$hostname]} ${command_name} "${web_commands[$command_name]}"
  done
done

for hostname in "${!db_hosts[@]}"; do
  for command_name in "${!db_commands[@]}"; do
    save_alias ${hostname} ${db_hosts[$hostname]} ${command_name} "${db_commands[$command_name]}"
  done
done
